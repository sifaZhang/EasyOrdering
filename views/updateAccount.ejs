<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/header.ejs') %>
        <title>My Account</title>
</head>
<body>
    <%- include('partials/navbarSelection.ejs') %>

    <h3 class="text-center mb-4" style="margin-top: 20px;">
        <%= s_username %>'s information
    </h3>

    <div style="display: flex; align-items: center; justify-content: center;">
        <form action="/updateAccountInfo" method="POST">
            <div class="d-flex userinfo-div">
                <label class="form-label me-3">User name</label>
                <input name="username" type="text" class="form-control me-3" value="<%= username %>" required />
                <label id="err_username" class="form-label-err text-danger"></label>
            </div>
    
            <div class="d-flex userinfo-div">
                <label class="form-label me-3">Password</label>
                <input name="password" id="password" type="password" class="form-control me-3" value="<%= password %>" required />
                <label id="err_password" class="form-label-err text-danger"></label>
            </div>
    
            <div class="d-flex userinfo-div">
                <label class="form-label me-3">Confirm</label>
                <input name="repassword" id="repassword" type="password" class="form-control me-3" value="<%= password %>" required />
                <label id="err_rePassword" class="form-label-err text-danger"></label>
            </div>
    
            <div class="d-flex userinfo-div">
                <label class="form-label me-3">First name</label>
                <input name="firstname" type="text" class="form-control me-3" value="<%= firstname %>" required />
                <label id="err_firstname" class="form-label-err text-danger"></label>
            </div>
    
            <div class="d-flex userinfo-div">
                <label class="form-label me-3">Last name</label>
                <input name="lastname" type="text" class="form-control me-3" value="<%= lastname %>" required />
                <label id="err_lastname" class="form-label-err text-danger"></label>
            </div>
    
            <div class="d-flex userinfo-div">
                <label class="form-label me-3">Phone</label>
                <input name="phone" type="text" class="form-control me-3" value="<%= phone %>" required />
                <label id="err_Phone" class="form-label-err text-danger"></label>
            </div>
    
            <div class="d-flex userinfo-div">
                <label class="form-label me-3">Email</label>
                <input name="email" type="email" class="form-control me-3" value="<%= email %>" required />
                <label id="err_email" class="form-label-err text-danger"></label>
            </div>
    
            <!-- 隐藏字段 -->
            <input type="hidden" name="userId" value="<%= id %>">

            <div class="d-flex userinfo-div justify-content-center" style="margin-bottom: 20px;">
                <button class="btn btn-primary" type="submit" style="width: 200px;">Update</button>
            </div>
        </form>
    </div>
    
    <% if (success==='1' ) { %>
        <div class="alert alert-success" style="text-align: center;">Update success!</div>
    <% } else if (success==='0' ) { %>
        <div class="alert alert-danger">Update fail, please retry!</div>
    <% } %>
    
    
    <%- include('partials/footer.ejs') %>

    
    <script>
        window.addEventListener('DOMContentLoaded', function () {
            const form = document.querySelector('form');
            const password = document.getElementById('password');
            const repassword = document.getElementById('repassword');
            const errLabel = document.getElementById('err_rePassword');

            form.addEventListener('submit', function (event) {
                if (password.value !== repassword.value) {
                    event.preventDefault(); // 阻止表单提交
                    errLabel.textContent = '*Passwords do not match.';
                }
            });
        });
    </script>

    
</body>
</html>


